file://osmosis <- http://bretth.dev.openstreetmap.org/osmosis-build/osmosis-latest.tgz
    mkdir osmosis
    cd osmosis
    wget http://bretth.dev.openstreetmap.org/osmosis-build/osmosis-latest.tgz
    tar xvfz osmosis-latest.tgz
    chmod a+x bin/osmosis

		
file://departements-shp.zip <- http://osm13.openstreetmap.fr/~cquest/openfla/export/departements-20140306-5m-shp.zip ! download


file://departements <- file://departements-shp.zip
    mkdir departements
    cd departements
    unzip ../departements-shp.zip
    rename 's/departements[^.]*(\..*)/departements$1/' *

	
file://LICENCE.txt <- file://departements
    cp departements/LICENCE.txt .

	
file://polygones <- file://departements, file://shp2poly_departements.py ! python
    import os, sys
    sys.path.append(os.getcwd())
    import shp2poly_departements
	
    os.mkdir('polygones')
    shp2poly_departements.shp2polys('departements/departements.shp', 'polygones')

	
file://planet-latest.osm.pbf <- http://planet.osm.org/pbf/planet-latest.osm.pbf ! download


file://planet-france.osm.pbf <- file://planet-latest.osm.pbf
    osmosis/bin/osmosis --read-pbf planet-latest.osm.pbf   --bounding-box top=51.15 left=-5.2 bottom=42.3 right=8.32 --write-pbf planet-france.osm.pbf

file://departement-78 <- file://planet-latest.osm.pbf
    mkdir departement-78
    osmosis/bin/osmosis --read-pbf planet-france.osm.pbf  --bounding-polygon file=polygones/departement-78.poly --write-pbf departement-78/departement-78.osm.pbf

	
file://departements-pbf <-
    mkdir departements-pbf
	

file://departements-pbf/departement-78.osm.pbf <- file://departements-pbf,  file://planet-latest.osm.pbf
    osmosis/bin/osmosis --read-pbf planet-france.osm.pbf  --bounding-polygon file=departements/departement-78.poly --write-pbf departements-pbf/departement-78.osm.pbf
	

file://departement-78/roads.shp <- file://departement-78 , file://departements-pbf/departement-78.osm.pbf 
    ogr2ogr -f "ESRI Shapefile" departement-78/roads.shp -sql "select osm_id, name, ref, highway AS "type", oneway, bridge, tunnel, maxspeed from lines where highway is not null" -lco ENCODING=UTF-8 departements-pbf/departement-78.osm.pbf 
